!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("axios")):"function"==typeof define&&define.amd?define(["axios"],t):(e||self).peopledatalabs=t(e.axios)}(this,function(e){function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=/*#__PURE__*/t(e);function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},i.apply(this,arguments)}var a=function(e,t,n,i,a){return new Promise(function(s,o){var r={};if(e||(r.message="Missing "+(i||"Params"),r.status=400,o(r)),"search"===a&&(e.searchQuery||(r.message="Missing searchQuery",r.status=400,o(r))),"retrieve"===a&&(e.id||(r.message="Missing id",r.status=400,o(r))),"autocomplete"===a){var c=e.field,u=["company","country","industry","location","major","region","role","school","sub_role","skill","title"];c?-1===u.indexOf(c)&&(r.message="field should be one of: "+u,r.status=400,o(r)):(r.message="Missing field",r.status=400,o(r))}"jobTitle"===a&&(e.jobTitle||(r.message="Missing jobTitle",r.status=400,o(r))),"skill"===a&&(e.skill||(r.message="Missing skill",r.status=400,o(r))),t||(r.message="Missing API Base Path",r.status=400,o(r)),n&&64===n.length||(r.message="Invalid API Key",r.status=401,o(r)),s()})},s=function(e){var t={400:"Request contained either missing or invalid parameters",401:"Request contained a missing or invalid key",402:"Payment Required, You have hit your account maximum (all matches used)",404:"No records were found matching your request",405:"Request method is not allowed on the requested resource",429:"An error occurred due to requests hitting the API too quick",500:"The server encountered an unexpected condition which prevented it from fulfilling the request"};if(e.response){var n=e.response.status,i=n>=500&&n<600?500:n;return{status:i,message:t[i]}}return{status:500,message:t[500]}},o=function(e){var t={rateLimitRemaining:e.headers["x-ratelimit-remaining"]?JSON.parse(e.headers["x-ratelimit-remaining"].replace(/'/g,'"')):void 0,rateLimitReset:e.headers["x-ratelimit-reset"]||void 0,rateLimitLimit:e.headers["x-ratelimit-limit"]?JSON.parse(e.headers["x-ratelimit-limit"].replace(/'/g,'"')):void 0,totalLimitOveragesRemaining:e.headers["x-totallimit-overages-remaining"]?Number(e.headers["x-totallimit-overages-remaining"]):void 0,totalLimitPurchasedRemaining:e.headers["x-totallimit-purchased-remaining"]?Number(e.headers["x-totallimit-purchased-remaining"]):void 0,totalLimitRemaining:e.headers["x-totallimit-remaining"]?Number(e.headers["x-totallimit-remaining"]):void 0,callCreditsType:e.headers["x-call-credits-type"]||void 0,callCreditsSpent:e.headers["x-call-credits-spent"]?Number(e.headers["x-call-credits-spent"]):void 0,lifetimeUsed:e.headers["x-lifetime-used"]?Number(e.headers["x-lifetime-used"]):void 0};return Array.isArray(e.data)?{items:e.data,rateLimit:t}:i({},e.data,{rateLimit:t})},r=function(e,t,r,c){return new Promise(function(u,l){a(r,e,t,null,"cleaner").then(function(){n.default.get(e+"/"+c+"/clean",{params:i({api_key:t},r),headers:{"Accept-Encoding":"gzip","User-Agent":"PDL-JS-SDK"}}).then(function(e){var t;200===(null==e||null==(t=e.data)?void 0:t.status)&&u(o(e))}).catch(function(e){l(s(e))})}).catch(function(e){l(e)})})},c=function(e,t,r,c,u){return new Promise(function(l,d){a(c,e,r,null,"enrichment").then(function(){var a=c.sandbox&&"person"===u?t+"/"+u+"/enrich":e+"/"+u+"/enrich",h=c;delete h.sandbox,Object.entries(h).forEach(function(e){var t=e[1];"object"==typeof t&&(h[e[0]]=JSON.stringify(t))}),n.default.get(a,{params:i({api_key:r},h),headers:{"Accept-Encoding":"gzip","User-Agent":"PDL-JS-SDK"}}).then(function(e){var t;200===(null==e||null==(t=e.data)?void 0:t.status)&&l(o(e))}).catch(function(e){d(s(e))})}).catch(function(e){d(e)})})},u=function(e,t,i,r,c,u){return new Promise(function(l,d){a(c,e,i,null,"search").then(function(){var a,h=c.pretty,f=c.sandbox,p=((a={titlecase:c.titlecase||!1,dataset:c.dataset||"all",scroll_token:c.scroll_token||null,size:c.size||10})["sql"===r?"sql":"query"]=c.searchQuery,a.pretty=h||!1,a);n.default.post(f&&"person"===u?t+"/person/search":e+"/"+u+"/search",p,{headers:{"Content-Type":"application/json","Accept-Encoding":"gzip","X-Api-Key":i,"User-Agent":"PDL-JS-SDK"}}).then(function(e){var t;200===(null==e||null==(t=e.data)?void 0:t.status)&&l(o(e))}).catch(function(e){d(s(e))})}).catch(function(e){d(e)})})};return function(e){var t=this,l=e.apiKey,d=e.basePath,h=e.sandboxBasePath,f=e.version;this.apiKey=void 0,this.basePath=void 0,this.sandboxBasePath=void 0,this.person=void 0,this.company=void 0,this.school=void 0,this.location=void 0,this.autocomplete=void 0,this.skill=void 0,this.jobTitle=void 0,this.apiKey=l,this.basePath=d||"https://api.peopledatalabs.com/"+(f||"v5"),this.sandboxBasePath=h||"https://sandbox.api.peopledatalabs.com/"+(f||"v5"),this.person={enrichment:function(e){return c(t.basePath,t.sandboxBasePath,t.apiKey,e,"person")},search:{elastic:function(e){return u(t.basePath,t.sandboxBasePath,t.apiKey,"elastic",e,"person")},sql:function(e){return u(t.basePath,t.sandboxBasePath,t.apiKey,"sql",e,"person")}},bulk:function(e){return function(e,t,i){var r={"Content-Type":"application/json","Accept-Encoding":"gzip","X-Api-Key":t,"User-Agent":"PDL-JS-SDK"};return new Promise(function(c,u){a(i,e,t,"Records","bulk").then(function(){n.default.post(e+"/person/bulk",i,{headers:r}).then(function(e){c(o(e))}).catch(function(e){u(s(e))})}).catch(function(e){u(e)})})}(t.basePath,t.apiKey,e)},identify:function(e){return function(e,t,r,c){return new Promise(function(u,l){a(c,e,r,null,"identify").then(function(){var a=c.sandbox?t+"/person/identify":e+"/person/identify",d=c;delete d.sandbox,Object.entries(d).forEach(function(e){var t=e[1];"object"==typeof t&&(d[e[0]]=JSON.stringify(t))}),n.default.get(a,{params:i({api_key:r},d),headers:{"Accept-Encoding":"gzip","User-Agent":"PDL-JS-SDK"}}).then(function(e){var t;200===(null==e||null==(t=e.data)?void 0:t.status)&&u(o(e))}).catch(function(e){l(s(e))})}).catch(function(e){l(e)})})}(t.basePath,t.sandboxBasePath,t.apiKey,e)},retrieve:function(e){return function(e,t,r){return new Promise(function(c,u){a(r,e,t,"ID","retrieve").then(function(){n.default.get(e+"/person/retrieve/"+r.id,{params:i({api_key:t},r),headers:{"Accept-Encoding":"gzip","User-Agent":"PDL-JS-SDK"}}).then(function(e){var t;200===(null==e||null==(t=e.data)?void 0:t.status)&&c(o(e))}).catch(function(e){u(s(e))})}).catch(function(e){u(e)})})}(t.basePath,t.apiKey,e)}},this.company={enrichment:function(e){return c(t.basePath,t.sandboxBasePath,t.apiKey,e,"company")},search:{elastic:function(e){return u(t.basePath,t.sandboxBasePath,t.apiKey,"elastic",e,"company")},sql:function(e){return u(t.basePath,t.sandboxBasePath,t.apiKey,"sql",e,"company")}},cleaner:function(e){return r(t.basePath,t.apiKey,e,"company")}},this.school={cleaner:function(e){return r(t.basePath,t.apiKey,e,"school")}},this.location={cleaner:function(e){return r(t.basePath,t.apiKey,e,"location")}},this.autocomplete=function(e){return function(e,t,r){return new Promise(function(c,u){a(r,e,t,null,"autocomplete").then(function(){n.default.get(e+"/autocomplete",{params:i({api_key:t},{field:r.field,text:r.text||"",size:r.size||10,pretty:r.pretty||!1}),headers:{"Accept-Encoding":"gzip","User-Agent":"PDL-JS-SDK"}}).then(function(e){var t;200===(null==e||null==(t=e.data)?void 0:t.status)&&c(o(e))}).catch(function(e){u(s(e))})}).catch(function(e){u(e)})})}(t.basePath,t.apiKey,e)},this.jobTitle=function(e){return function(e,t,r){return new Promise(function(c,u){a(r,e,t,null,"jobTitle").then(function(){n.default.get(e+"/job_title/enrich",{params:i({api_key:t},{job_title:r.jobTitle,pretty:r.pretty||!1}),headers:{"Accept-Encoding":"gzip","User-Agent":"PDL-JS-SDK"}}).then(function(e){var t;200===(null==e||null==(t=e.data)?void 0:t.status)&&c(o(e))}).catch(function(e){u(s(e))})}).catch(function(e){u(e)})})}(t.basePath,t.apiKey,e)},this.skill=function(e){return function(e,t,r){return new Promise(function(c,u){a(r,e,t,null,"skill").then(function(){n.default.get(e+"/skill/enrich",{params:i({api_key:t},{skill:r.skill,pretty:r.pretty||!1}),headers:{"Accept-Encoding":"gzip","User-Agent":"PDL-JS-SDK"}}).then(function(e){var t;200===(null==e||null==(t=e.data)?void 0:t.status)&&c(o(e))}).catch(function(e){u(s(e))})}).catch(function(e){u(e)})})}(t.basePath,t.apiKey,e)}}});
//# sourceMappingURL=index.umd.js.map
