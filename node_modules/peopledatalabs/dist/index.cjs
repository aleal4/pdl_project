function e(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var t=/*#__PURE__*/e(require("axios"));function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},n.apply(this,arguments)}var i=function(e,t,n,i,a){return new Promise(function(s,r){var o={};if(e||(o.message="Missing "+(i||"Params"),o.status=400,r(o)),"search"===a&&(e.searchQuery||(o.message="Missing searchQuery",o.status=400,r(o))),"retrieve"===a&&(e.id||(o.message="Missing id",o.status=400,r(o))),"autocomplete"===a){var c=e.field,u=["company","country","industry","location","major","region","role","school","sub_role","skill","title"];c?-1===u.indexOf(c)&&(o.message="field should be one of: "+u,o.status=400,r(o)):(o.message="Missing field",o.status=400,r(o))}"jobTitle"===a&&(e.jobTitle||(o.message="Missing jobTitle",o.status=400,r(o))),"skill"===a&&(e.skill||(o.message="Missing skill",o.status=400,r(o))),t||(o.message="Missing API Base Path",o.status=400,r(o)),n&&64===n.length||(o.message="Invalid API Key",o.status=401,r(o)),s()})},a=function(e){var t={400:"Request contained either missing or invalid parameters",401:"Request contained a missing or invalid key",402:"Payment Required, You have hit your account maximum (all matches used)",404:"No records were found matching your request",405:"Request method is not allowed on the requested resource",429:"An error occurred due to requests hitting the API too quick",500:"The server encountered an unexpected condition which prevented it from fulfilling the request"};if(e.response){var n=e.response.status,i=n>=500&&n<600?500:n;return{status:i,message:t[i]}}return{status:500,message:t[500]}},s=function(e){var t={rateLimitRemaining:e.headers["x-ratelimit-remaining"]?JSON.parse(e.headers["x-ratelimit-remaining"].replace(/'/g,'"')):void 0,rateLimitReset:e.headers["x-ratelimit-reset"]||void 0,rateLimitLimit:e.headers["x-ratelimit-limit"]?JSON.parse(e.headers["x-ratelimit-limit"].replace(/'/g,'"')):void 0,totalLimitOveragesRemaining:e.headers["x-totallimit-overages-remaining"]?Number(e.headers["x-totallimit-overages-remaining"]):void 0,totalLimitPurchasedRemaining:e.headers["x-totallimit-purchased-remaining"]?Number(e.headers["x-totallimit-purchased-remaining"]):void 0,totalLimitRemaining:e.headers["x-totallimit-remaining"]?Number(e.headers["x-totallimit-remaining"]):void 0,callCreditsType:e.headers["x-call-credits-type"]||void 0,callCreditsSpent:e.headers["x-call-credits-spent"]?Number(e.headers["x-call-credits-spent"]):void 0,lifetimeUsed:e.headers["x-lifetime-used"]?Number(e.headers["x-lifetime-used"]):void 0};return Array.isArray(e.data)?{items:e.data,rateLimit:t}:n({},e.data,{rateLimit:t})},r=function(e,r,o,c){return new Promise(function(u,l){i(o,e,r,null,"cleaner").then(function(){t.default.get(e+"/"+c+"/clean",{params:n({api_key:r},o),headers:{"Accept-Encoding":"gzip","User-Agent":"PDL-JS-SDK"}}).then(function(e){var t;200===(null==e||null==(t=e.data)?void 0:t.status)&&u(s(e))}).catch(function(e){l(a(e))})}).catch(function(e){l(e)})})},o=function(e,r,o,c,u){return new Promise(function(l,h){i(c,e,o,null,"enrichment").then(function(){var i=c.sandbox&&"person"===u?r+"/"+u+"/enrich":e+"/"+u+"/enrich",d=c;delete d.sandbox,Object.entries(d).forEach(function(e){var t=e[1];"object"==typeof t&&(d[e[0]]=JSON.stringify(t))}),t.default.get(i,{params:n({api_key:o},d),headers:{"Accept-Encoding":"gzip","User-Agent":"PDL-JS-SDK"}}).then(function(e){var t;200===(null==e||null==(t=e.data)?void 0:t.status)&&l(s(e))}).catch(function(e){h(a(e))})}).catch(function(e){h(e)})})},c=function(e,n,r,o,c,u){return new Promise(function(l,h){i(c,e,r,null,"search").then(function(){var i,d=c.pretty,p=c.sandbox,f=((i={titlecase:c.titlecase||!1,dataset:c.dataset||"all",scroll_token:c.scroll_token||null,size:c.size||10})["sql"===o?"sql":"query"]=c.searchQuery,i.pretty=d||!1,i);t.default.post(p&&"person"===u?n+"/person/search":e+"/"+u+"/search",f,{headers:{"Content-Type":"application/json","Accept-Encoding":"gzip","X-Api-Key":r,"User-Agent":"PDL-JS-SDK"}}).then(function(e){var t;200===(null==e||null==(t=e.data)?void 0:t.status)&&l(s(e))}).catch(function(e){h(a(e))})}).catch(function(e){h(e)})})};module.exports=function(e){var u=this,l=e.apiKey,h=e.basePath,d=e.sandboxBasePath,p=e.version;this.apiKey=void 0,this.basePath=void 0,this.sandboxBasePath=void 0,this.person=void 0,this.company=void 0,this.school=void 0,this.location=void 0,this.autocomplete=void 0,this.skill=void 0,this.jobTitle=void 0,this.apiKey=l,this.basePath=h||"https://api.peopledatalabs.com/"+(p||"v5"),this.sandboxBasePath=d||"https://sandbox.api.peopledatalabs.com/"+(p||"v5"),this.person={enrichment:function(e){return o(u.basePath,u.sandboxBasePath,u.apiKey,e,"person")},search:{elastic:function(e){return c(u.basePath,u.sandboxBasePath,u.apiKey,"elastic",e,"person")},sql:function(e){return c(u.basePath,u.sandboxBasePath,u.apiKey,"sql",e,"person")}},bulk:function(e){return function(e,n,r){var o={"Content-Type":"application/json","Accept-Encoding":"gzip","X-Api-Key":n,"User-Agent":"PDL-JS-SDK"};return new Promise(function(c,u){i(r,e,n,"Records","bulk").then(function(){t.default.post(e+"/person/bulk",r,{headers:o}).then(function(e){c(s(e))}).catch(function(e){u(a(e))})}).catch(function(e){u(e)})})}(u.basePath,u.apiKey,e)},identify:function(e){return function(e,r,o,c){return new Promise(function(u,l){i(c,e,o,null,"identify").then(function(){var i=c.sandbox?r+"/person/identify":e+"/person/identify",h=c;delete h.sandbox,Object.entries(h).forEach(function(e){var t=e[1];"object"==typeof t&&(h[e[0]]=JSON.stringify(t))}),t.default.get(i,{params:n({api_key:o},h),headers:{"Accept-Encoding":"gzip","User-Agent":"PDL-JS-SDK"}}).then(function(e){var t;200===(null==e||null==(t=e.data)?void 0:t.status)&&u(s(e))}).catch(function(e){l(a(e))})}).catch(function(e){l(e)})})}(u.basePath,u.sandboxBasePath,u.apiKey,e)},retrieve:function(e){return function(e,r,o){return new Promise(function(c,u){i(o,e,r,"ID","retrieve").then(function(){t.default.get(e+"/person/retrieve/"+o.id,{params:n({api_key:r},o),headers:{"Accept-Encoding":"gzip","User-Agent":"PDL-JS-SDK"}}).then(function(e){var t;200===(null==e||null==(t=e.data)?void 0:t.status)&&c(s(e))}).catch(function(e){u(a(e))})}).catch(function(e){u(e)})})}(u.basePath,u.apiKey,e)}},this.company={enrichment:function(e){return o(u.basePath,u.sandboxBasePath,u.apiKey,e,"company")},search:{elastic:function(e){return c(u.basePath,u.sandboxBasePath,u.apiKey,"elastic",e,"company")},sql:function(e){return c(u.basePath,u.sandboxBasePath,u.apiKey,"sql",e,"company")}},cleaner:function(e){return r(u.basePath,u.apiKey,e,"company")}},this.school={cleaner:function(e){return r(u.basePath,u.apiKey,e,"school")}},this.location={cleaner:function(e){return r(u.basePath,u.apiKey,e,"location")}},this.autocomplete=function(e){return function(e,r,o){return new Promise(function(c,u){i(o,e,r,null,"autocomplete").then(function(){t.default.get(e+"/autocomplete",{params:n({api_key:r},{field:o.field,text:o.text||"",size:o.size||10,pretty:o.pretty||!1}),headers:{"Accept-Encoding":"gzip","User-Agent":"PDL-JS-SDK"}}).then(function(e){var t;200===(null==e||null==(t=e.data)?void 0:t.status)&&c(s(e))}).catch(function(e){u(a(e))})}).catch(function(e){u(e)})})}(u.basePath,u.apiKey,e)},this.jobTitle=function(e){return function(e,r,o){return new Promise(function(c,u){i(o,e,r,null,"jobTitle").then(function(){t.default.get(e+"/job_title/enrich",{params:n({api_key:r},{job_title:o.jobTitle,pretty:o.pretty||!1}),headers:{"Accept-Encoding":"gzip","User-Agent":"PDL-JS-SDK"}}).then(function(e){var t;200===(null==e||null==(t=e.data)?void 0:t.status)&&c(s(e))}).catch(function(e){u(a(e))})}).catch(function(e){u(e)})})}(u.basePath,u.apiKey,e)},this.skill=function(e){return function(e,r,o){return new Promise(function(c,u){i(o,e,r,null,"skill").then(function(){t.default.get(e+"/skill/enrich",{params:n({api_key:r},{skill:o.skill,pretty:o.pretty||!1}),headers:{"Accept-Encoding":"gzip","User-Agent":"PDL-JS-SDK"}}).then(function(e){var t;200===(null==e||null==(t=e.data)?void 0:t.status)&&c(s(e))}).catch(function(e){u(a(e))})}).catch(function(e){u(e)})})}(u.basePath,u.apiKey,e)}};
//# sourceMappingURL=index.cjs.map
